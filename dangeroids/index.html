<!DOCTYPE HTML>
<html>
<head>
	<title>pixi.js example 1</title>
	<style>
		body {
			margin: 0;
			padding: 0;
			background-color: #000000;
		}
	</style>
	<script src="pixi.js"></script>
	<script src="planet.js"></script>
</head>
<body>
	<script>

	// initial positions
	var merR = 100;
	var merAlpha = 0;
	var merSize = 2;
	var venR = 200;
	var venAlpha = 0;
	var venSize = 4;
	var earR = 300;
	var earAlpha = 0;
	var earSize = 4;
	var marR = 400;
	var marAlpha = 0;
	var marSize = 3;

	// center of the window
	var centerX = window.innerWidth/2;
	var centerY = window.innerHeight/2;
	
	// planets
	var sun = new Planet(0, 0, 0, 0xCCCCCC);
	var mercury = new Planet(merR, merAlpha, 0.05, 0xEEEEEE);
	var venus = new Planet(venR, venAlpha, 0.04, 0xEEEEAA);
	var earth = new Planet(earR, earAlpha, 0.03, 0x0000FF);
	var mars = new Planet(marR, marAlpha, 0.02, 0xFF0000);


	// create an new instance of a pixi stage
	var stage = new PIXI.Stage(0x000000);

	// create a renderer instance
	var renderer = PIXI.autoDetectRenderer(window.innerWidth, window.innerHeight);

	// add the renderer view element to the DOM
	document.body.appendChild(renderer.view);

	requestAnimFrame(animate);

	// add Sun
	sun.beginFill(sun.color);
	sun.drawCircle(centerX, centerY, 50);
	sun.endFill();
	
	// add Mercury
	mercury.beginFill(mercury.color);
	mercury.drawCircle(centerX + merR*Math.cos(merAlpha), centerY - merR*Math.sin(merAlpha), merSize);
	mercury.endFill();

	// add Venus
	venus.beginFill(venus.color);
	venus.drawCircle(centerX + venR*Math.cos(venAlpha), centerY - venR*Math.sin(venAlpha), venSize);
	venus.endFill();

	// add Earth
	earth.beginFill(earth.color);
	earth.drawCircle(centerX + earR*Math.cos(earAlpha), centerY - earR*Math.sin(earAlpha), earSize);
	earth.endFill();

	// add Mars
	mars.beginFill(mars.color);
	mars.drawCircle(centerX + marR*Math.cos(marAlpha), centerY - marR*Math.sin(marAlpha), marSize);
	mars.endFill();

	// add it the stage so we see it on our screens..
	stage.addChild(sun);
	stage.addChild(mercury);
	stage.addChild(venus);
	stage.addChild(earth);
	stage.addChild(mars);

	function animate() {
	    requestAnimFrame(animate);
	    
	    // rotate mercury
	    rotate(mercury, mercury.r, merAlpha, mercury.angle, mercury.speed);
	    mercury.angle += mercury.speed;	 

	    // rotate venus
	    rotate(venus, venus.r, venAlpha, venus.angle, venus.speed);
	    venus.angle += venus.speed;

	    // rotate earth
	    rotate(earth, earth.r, earAlpha, earth.angle, earth.speed);
	    earth.angle += earth.speed;

	    // rotate mars
	    rotate(mars, mars.r, marAlpha, mars.angle, mars.speed);
	    mars.angle += mars.speed;

	    // render the stage
	    renderer.render(stage);
	}

	function rotate(object, r, initAlpha, alpha, speed)
	{
		object.x = r*Math.cos(alpha) - r*Math.cos(initAlpha);
		object.y = r*Math.sin(alpha) - r*Math.sin(initAlpha);
	}
	</script>

	</body>
</html>
